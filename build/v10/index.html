<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="https://public-frontend-cos.metadl.com/mgx/img/favicon.png" type="image/png">
  <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ - Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø®ÙŠØ±ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
  <meta name="description" content="Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø®ÙŠØ±ÙŠ Ù…Ø¹ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù… ÙˆØ£Ù†Ø¸Ù…Ø© ØªØ­ÙÙŠØ² Ø°ÙƒÙŠØ©" />
  <meta name="author" content="MGX" />
  <meta name="keywords" content="Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡, Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø®ÙŠØ±ÙŠ, Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ, Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª, Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±Ù‚" />

  <meta property="og:title" content="Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ - Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø®ÙŠØ±ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…" />
  <meta property="og:description" content="Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø®ÙŠØ±ÙŠ Ù…Ø¹ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù… ÙˆØ£Ù†Ø¸Ù…Ø© ØªØ­ÙÙŠØ² Ø°ÙƒÙŠØ©" />
  <meta property="og:type" content="website" />

  <!-- Arabic Font Support -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Cairo', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      direction: rtl;
    }

    /* Ø¥ØµÙ„Ø§Ø­ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª - ØªØ­Ø¯ÙŠØ« Ù…Ø­Ø³Ù‘Ù† */
    [data-sonner-toaster] {
      position: fixed !important;
      bottom: 80px !important;
      left: 20px !important;
      right: auto !important;
      top: auto !important;
      z-index: 999999 !important;
      display: flex !important;
      flex-direction: column !important;
      gap: 12px !important;
      pointer-events: none !important;
    }

    [data-sonner-toast] {
      pointer-events: all !important;
      background: white !important;
      border: 1px solid #e5e7eb !important;
      border-radius: 12px !important;
      padding: 16px 20px !important;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
      min-width: 320px !important;
      max-width: 400px !important;
      animation: slideInLeft 0.3s cubic-bezier(0.16, 1, 0.3, 1) !important;
      opacity: 1 !important;
      display: flex !important;
      align-items: start !important;
      gap: 12px !important;
    }

    @keyframes slideInLeft {
      from {
        transform: translateX(-100%) scale(0.95);
        opacity: 0;
      }
      to {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
    }

    @keyframes slideInLeft {
      from {
        transform: translateX(-100%) scale(0.95);
        opacity: 0;
      }
      to {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
    }

    @keyframes slideOutLeft {
      from {
        transform: translateX(0) scale(1);
        opacity: 1;
      }
      to {
        transform: translateX(-100%) scale(0.95);
        opacity: 0;
      }
    }

    /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
    [data-sonner-toast][data-type="success"]::before {
      content: "âœ…";
      font-size: 20px;
      display: block;
    }

    [data-sonner-toast][data-type="error"]::before {
      content: "âŒ";
      font-size: 20px;
      display: block;
    }

    [data-sonner-toast][data-type="warning"]::before {
      content: "âš ï¸";
      font-size: 20px;
      display: block;
    }

    [data-sonner-toast][data-type="info"]::before {
      content: "â„¹ï¸";
      font-size: 20px;
      display: block;
    }

    /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
    [data-sonner-toast][data-type="success"] {
      border-right: 4px solid #10b981 !important;
      background: #f0fdf4 !important;
    }

    [data-sonner-toast][data-type="error"] {
      border-right: 4px solid #ef4444 !important;
      background: #fef2f2 !important;
    }

    [data-sonner-toast][data-type="warning"] {
      border-right: 4px solid #f59e0b !important;
      background: #fffbeb !important;
    }

    [data-sonner-toast][data-type="info"] {
      border-right: 4px solid #3b82f6 !important;
      background: #eff6ff !important;
    }

    /* Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± */
    [data-sonner-toast] [data-title] {
      font-weight: 600 !important;
      font-size: 14px !important;
      margin-bottom: 4px !important;
    }

    [data-sonner-toast] [data-description] {
      font-size: 13px !important;
      color: #6b7280 !important;
    }

    /* Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ */
    [data-sonner-toast] [data-close-button] {
      position: absolute !important;
      top: 8px !important;
      left: 8px !important;
      right: auto !important;
      opacity: 0.5 !important;
      transition: opacity 0.2s !important;
    }

    [data-sonner-toast] [data-close-button]:hover {
      opacity: 1 !important;
    }
  </style>
  <script type="module" crossorigin src="/assets/index-Bwri3W_O.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/index-FnOYCDch.css">
  
  <script>
    // ========================================
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API - Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    // ========================================
    
    const API_BASE_URL = 'http://localhost:8000/api';
    const USE_API = true; // true = Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª | false = Ø§Ø³ØªØ®Ø¯Ø§Ù… localStorage
    
    // Ø¯Ø§Ù„Ø© Ø¹Ø§Ù…Ø© Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API
    async function apiRequest(endpoint, method = 'GET', data = null) {
      const url = `${API_BASE_URL}${endpoint}`;
      const options = {
        method: method,
        headers: {
          'Content-Type': 'application/json',
        },
      };
      
      if (data && (method === 'POST' || method === 'PUT' || method === 'PATCH')) {
        options.body = JSON.stringify(data);
      }
      
      try {
        console.log(`ğŸ“¡ API Request: ${method} ${url}`, data || '');
        const response = await fetch(url, options);
        
        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.detail || `HTTP ${response.status}`);
        }
        
        // Ø­Ø§Ù„Ø© 204 No Content (Ù„Ù„Ø­Ø°Ù)
        if (response.status === 204) {
          console.log('âœ“ API Response: 204 No Content');
          return null;
        }
        
        const result = await response.json();
        console.log('âœ“ API Response:', result);
        return result;
      } catch (error) {
        console.error('âœ— API Error:', error);
        
        // ÙÙŠ Ø­Ø§Ù„Ø© ÙØ´Ù„ APIØŒ Ø§Ø³ØªØ®Ø¯Ù… localStorage ÙƒÙ†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        if (USE_API) {
          console.warn('âš ï¸ API failed, falling back to localStorage');
        }
        throw error;
      }
    }
    
    // ========================================
    // Ø¯ÙˆØ§Ù„ API Ù„Ù„Ù…Ù‡Ø§Ù… (Tasks)
    // ========================================
    
    window.apiCreateTask = async function(taskData) {
      if (!USE_API) {
        // Fallback to localStorage
        return localStorageCreateTask(taskData);
      }
      
      try {
        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØµÙŠØºØ© API
        const apiData = {
          title: taskData.title,
          description: taskData.description || '',
          project_id: parseInt(taskData.projectId) || 1,
          assigned_to: parseInt(taskData.assignedTo) || 1,
          priority: taskData.priority || 'medium',
          status: taskData.status || 'pending',
          due_date: taskData.dueDate ? new Date(taskData.dueDate).toISOString() : null
        };
        
        const result = await apiRequest('/tasks', 'POST', apiData);
        showNotification('ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âœ“', `Ø§Ù„Ù…Ù‡Ù…Ø© "${result.title}" ØªÙ… Ø­ÙØ¸Ù‡Ø§`, 'success');
        
        // Ø­ÙØ¸ Ù†Ø³Ø®Ø© ÙÙŠ localStorage ÙƒÙ†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
        localStorageCreateTask(result);
        
        return result;
      } catch (error) {
        showNotification('Ø®Ø·Ø£ ÙÙŠ API', error.message, 'error');
        // Fallback to localStorage
        return localStorageCreateTask(taskData);
      }
    };
    
    window.apiGetTasks = async function(filters = {}) {
      if (!USE_API) {
        return localStorageGetTasks();
      }
      
      try {
        const params = new URLSearchParams(filters).toString();
        const endpoint = params ? `/tasks?${params}` : '/tasks';
        return await apiRequest(endpoint, 'GET');
      } catch (error) {
        return localStorageGetTasks();
      }
    };
    
    window.apiUpdateTask = async function(taskId, updates) {
      if (!USE_API) {
        return localStorageUpdateTask(taskId, updates);
      }
      
      try {
        const result = await apiRequest(`/tasks/${taskId}`, 'PUT', updates);
        showNotification('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âœ“', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        
        // ØªØ­Ø¯ÙŠØ« localStorage
        localStorageUpdateTask(taskId, result);
        
        return result;
      } catch (error) {
        showNotification('Ø®Ø·Ø£ ÙÙŠ API', error.message, 'error');
        return localStorageUpdateTask(taskId, updates);
      }
    };
    
    window.apiDeleteTask = async function(taskId) {
      if (!USE_API) {
        return localStorageDeleteTask(taskId);
      }
      
      try {
        await apiRequest(`/tasks/${taskId}`, 'DELETE');
        showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª âœ“', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        
        // Ø­Ø°Ù Ù…Ù† localStorage
        localStorageDeleteTask(taskId);
        
        return true;
      } catch (error) {
        showNotification('Ø®Ø·Ø£ ÙÙŠ API', error.message, 'error');
        return localStorageDeleteTask(taskId);
      }
    };
    
    // ========================================
    // Ø¯ÙˆØ§Ù„ localStorage (Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©)
    // ========================================
    
    function localStorageCreateTask(taskData) {
      try {
        const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        tasks.unshift(taskData);
        localStorage.setItem('tasks', JSON.stringify(tasks));
        
        const charityTasks = JSON.parse(localStorage.getItem('charity_tasks') || '[]');
        charityTasks.unshift(taskData);
        localStorage.setItem('charity_tasks', JSON.stringify(charityTasks));
        
        console.log('âœ“ Saved to localStorage');
        return taskData;
      } catch (error) {
        console.error('localStorage save failed:', error);
        return null;
      }
    }
    
    function localStorageGetTasks() {
      try {
        const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        const charityTasks = JSON.parse(localStorage.getItem('charity_tasks') || '[]');
        return { tasks, charityTasks };
      } catch (error) {
        console.error('localStorage read failed:', error);
        return { tasks: [], charityTasks: [] };
      }
    }
    
    function localStorageUpdateTask(taskId, updates) {
      try {
        const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        const index = tasks.findIndex(t => t.id == taskId);
        if (index !== -1) {
          tasks[index] = { ...tasks[index], ...updates, updatedAt: new Date().toISOString() };
          localStorage.setItem('tasks', JSON.stringify(tasks));
        }
        return tasks[index];
      } catch (error) {
        console.error('localStorage update failed:', error);
        return null;
      }
    }
    
    function localStorageDeleteTask(taskId) {
      try {
        const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        const filtered = tasks.filter(t => t.id != taskId);
        localStorage.setItem('tasks', JSON.stringify(filtered));
        return true;
      } catch (error) {
        console.error('localStorage delete failed:', error);
        return false;
      }
    }
    
    // ========================================
    // Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    // ========================================
    
    window.syncLocalStorageToDatabase = async function() {
      if (!USE_API) {
        console.warn('API mode is disabled');
        return;
      }
      
      console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
      
      try {
        // ÙØ­Øµ Ø§ØªØµØ§Ù„ API
        await apiRequest('/health', 'GET');
        console.log('âœ“ API Server is running');
      } catch (error) {
        console.error('âœ— API Server is not running. Start it first!');
        showNotification('Ø®Ø·Ø£', 'Ø§Ù„Ø®Ø§Ø¯Ù… ØºÙŠØ± Ù…ØªØµÙ„! Ø´ØºÙ‘Ù„ backend/start.bat Ø£ÙˆÙ„Ø§Ù‹', 'error');
        return;
      }
      
      const { tasks, charityTasks } = localStorageGetTasks();
      const allTasks = [...tasks, ...charityTasks];
      
      let synced = 0;
      let failed = 0;
      
      for (const task of allTasks) {
        try {
          await apiCreateTask(task);
          synced++;
        } catch (error) {
          console.error('Failed to sync task:', task.id, error);
          failed++;
        }
      }
      
      console.log(`âœ“ ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©: ${synced} Ù…Ù‡Ù…Ø© | ÙØ´Ù„: ${failed}`);
      showNotification(
        'ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© âœ“',
        `ØªÙ… Ø±ÙØ¹ ${synced} Ù…Ù‡Ù…Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª`,
        'success'
      );
    };
    
    // ========================================
    // ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    // ========================================
    
    window.checkDatabaseConnection = async function() {
      console.log('ğŸ” ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');
      
      try {
        const health = await apiRequest('/health', 'GET');
        console.log('âœ… Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!', health);
        showNotification('Ù…ØªØµÙ„ âœ“', 'Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        return true;
      } catch (error) {
        console.error('âŒ ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!', error);
        showNotification(
          'ØºÙŠØ± Ù…ØªØµÙ„',
          'Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ØªØ§Ø­Ø©. Ø´ØºÙ‘Ù„ backend/start.bat',
          'warning'
        );
        return false;
      }
    };
    
    // ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    if (USE_API) {
      setTimeout(() => {
        checkDatabaseConnection();
      }, 2000);
    }
    
    console.log('âœ… Ù†Ø¸Ø§Ù… API Ø¬Ø§Ù‡Ø²!');
    console.log(`ğŸ“Š Ø§Ù„ÙˆØ¶Ø¹: ${USE_API ? 'Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database)' : 'Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ (localStorage)'}`);
    console.log('ğŸ”§ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„: USE_API = true/false');
    console.log('ğŸ“ Ø¯ÙˆØ§Ù„ API Ø§Ù„Ù…ØªØ§Ø­Ø©:');
    console.log('  - apiCreateTask(data)');
    console.log('  - apiGetTasks()');
    console.log('  - apiUpdateTask(id, updates)');
    console.log('  - apiDeleteTask(id)');
    console.log('  - syncLocalStorageToDatabase()');
    console.log('  - checkDatabaseConnection()');
    
    // Ø¥Ø¶Ø§ÙØ© Ø²Ø± "Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©" ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
    function addTaskButton() {
      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØµÙØ­Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
      const taskHeader = Array.from(document.querySelectorAll('h1, h2')).find(el => 
        el.textContent.includes('Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…Ù…') || el.textContent.includes('Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…')
      );
      
      if (taskHeader && !document.getElementById('add-task-btn')) {
        const headerContainer = taskHeader.parentElement;
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        const addButton = document.createElement('button');
        addButton.id = 'add-task-btn';
        addButton.textContent = '+ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©';
        addButton.style.cssText = `
          display: inline-block !important;
          margin-right: 16px !important;
          background: #3b82f6 !important;
          color: white !important;
          border: none !important;
          padding: 10px 20px !important;
          border-radius: 8px !important;
          cursor: pointer !important;
          font-size: 14px !important;
          font-weight: 600 !important;
          transition: all 0.2s !important;
          font-family: 'Cairo', sans-serif !important;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3) !important;
          vertical-align: middle !important;
        `;
        
        addButton.onmouseover = () => {
          addButton.style.background = '#2563eb';
          addButton.style.transform = 'translateY(-2px)';
          addButton.style.boxShadow = '0 4px 12px rgba(37, 99, 235, 0.4)';
        };
        addButton.onmouseout = () => {
          addButton.style.background = '#3b82f6';
          addButton.style.transform = 'translateY(0)';
          addButton.style.boxShadow = '0 2px 8px rgba(59, 130, 246, 0.3)';
        };
        
        addButton.onclick = function(e) {
          e.preventDefault();
          e.stopPropagation();
          showTaskModal();
        };
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²Ø± Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
        if (headerContainer.style.display !== 'flex') {
          headerContainer.style.display = 'flex';
          headerContainer.style.alignItems = 'center';
          headerContainer.style.gap = '12px';
        }
        headerContainer.insertBefore(addButton, taskHeader.nextSibling);
      }
    }
    
    // ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙˆØ¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('load', function() {
      setTimeout(addTaskButton, 1000);
      // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ ÙÙŠ Ø­Ø§Ù„ Ø§Ø®ØªÙÙ‰ Ø§Ù„Ø²Ø±
      setInterval(addTaskButton, 3000);
    });

    // Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© - Ù…Ø­Ø³Ù‘Ù†Ø©
    window.showTaskModal = function() {
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ù„ÙÙŠØ©
      const overlay = document.createElement('div');
      overlay.id = 'task-modal-overlay';
      overlay.style.cssText = `
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        background: rgba(0,0,0,0.5) !important;
        z-index: 100000 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
      `;
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø©
      const modal = document.createElement('div');
      modal.style.cssText = `
        background: white;
        border-radius: 12px;
        padding: 24px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1);
      `;
      
      modal.innerHTML = `
        <h2 style="margin: 0 0 20px 0; font-size: 20px;">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>
        <form id="task-form">
          <div style="margin-bottom: 16px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø© *</label>
            <input type="text" id="task-title" required style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Cairo', sans-serif;" />
          </div>
          
          <div style="margin-bottom: 16px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ø§Ù„ÙˆØµÙ</label>
            <textarea id="task-description" rows="3" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Cairo', sans-serif;"></textarea>
          </div>
          
          <div style="margin-bottom: 16px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</label>
            <input type="text" id="task-assignee" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Cairo', sans-serif;" />
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>
              <select id="task-priority" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Cairo', sans-serif;">
                <option value="low">Ù…Ù†Ø®ÙØ¶Ø©</option>
                <option value="medium" selected>Ù…ØªÙˆØ³Ø·Ø©</option>
                <option value="high">Ø¹Ø§Ù„ÙŠØ©</option>
                <option value="urgent">Ø¹Ø§Ø¬Ù„Ø©</option>
              </select>
            </div>
            
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600;">Ø§Ù„Ø­Ø§Ù„Ø©</label>
              <select id="task-status" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Cairo', sans-serif;">
                <option value="pending" selected>Ù…Ø¹Ù„Ù‚Ø©</option>
                <option value="in-progress">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
                <option value="completed">Ù…ÙƒØªÙ…Ù„Ø©</option>
                <option value="blocked">Ù…Ø­Ø¸ÙˆØ±Ø©</option>
              </select>
            </div>
          </div>
          
          <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 8px; font-weight: 600;">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</label>
            <input type="date" id="task-date" style="width: 100%; padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; font-family: 'Cairo', sans-serif;" />
          </div>
          
          <div style="display: flex; gap: 12px; justify-content: flex-end;">
            <button type="button" onclick="closeTaskModal()" style="padding: 10px 20px; border: 1px solid #ddd; background: white; border-radius: 6px; cursor: pointer; font-family: 'Cairo', sans-serif;">Ø¥Ù„ØºØ§Ø¡</button>
            <button type="submit" style="padding: 10px 20px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer; font-family: 'Cairo', sans-serif;">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
          </div>
        </form>
      `;
      
      overlay.appendChild(modal);
      document.body.appendChild(overlay);
      
      // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ - Ù…Ø­Ø³Ù‘Ù† Ù…Ø¹ Ø¯Ø¹Ù… API
      const form = document.getElementById('task-form');
      form.onsubmit = async function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const title = document.getElementById('task-title').value;
        if (!title) {
          if (window.showNotification) {
            window.showNotification('Ø®Ø·Ø£', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø©', 'error');
          }
          return false;
        }
        
        const taskData = {
          id: 'task_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
          title: title,
          description: document.getElementById('task-description').value || '',
          assignedTo: document.getElementById('task-assignee').value || '1',
          priority: document.getElementById('task-priority').value,
          status: document.getElementById('task-status').value,
          dueDate: document.getElementById('task-date').value || new Date().toISOString().split('T')[0],
          projectId: '1',
          projectName: 'Ù…Ø´Ø±ÙˆØ¹ Ø§ÙØªØ±Ø§Ø¶ÙŠ',
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        };
        
        console.log('Creating task:', taskData);
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… API Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙØ¹Ù„Ø§Ù‹
        try {
          const result = await apiCreateTask(taskData);
          
          if (result) {
            console.log('Task created successfully:', result);
            closeTaskModal();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ©
            setTimeout(() => {
              console.log('Reloading page...');
              location.reload();
            }, 1000);
          } else {
            throw new Error('Failed to create task');
          }
        } catch (error) {
          console.error('Error creating task:', error);
          showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©: ' + error.message, 'error');
        }
        
        return false;
      };
      
      window.closeTaskModal = function() {
        const modal = document.getElementById('task-modal-overlay');
        if (modal) {
          modal.remove();
        }
      };
      
      overlay.onclick = function(e) {
        if (e.target === overlay) closeTaskModal();
      };
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆØ§Ù„Ø¹Ø§Ù…Ù„ - Ù…Ø­Ø¯Ø« Ù…Ø¹ !important
    window.showNotification = function(title, description, type) {
      type = type || 'info';
      
      // Ø¥Ù†Ø´Ø§Ø¡ container Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
      let toaster = document.querySelector('[data-sonner-toaster]');
      if (!toaster) {
        toaster = document.createElement('ol');
        toaster.setAttribute('data-sonner-toaster', '');
        toaster.style.cssText = `
          position: fixed !important;
          bottom: 80px !important;
          left: 20px !important;
          z-index: 999999 !important;
          display: flex !important;
          flex-direction: column !important;
          gap: 12px !important;
          pointer-events: none !important;
          list-style: none !important;
          margin: 0 !important;
          padding: 0 !important;
        `;
        document.body.appendChild(toaster);
      }
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
      const toast = document.createElement('li');
      toast.setAttribute('data-sonner-toast', '');
      toast.setAttribute('data-type', type);
      toast.style.cssText = `
        pointer-events: all !important;
        background: white !important;
        border: 1px solid #e5e7eb !important;
        border-radius: 12px !important;
        padding: 16px 20px !important;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
        min-width: 320px !important;
        max-width: 400px !important;
        animation: slideInLeft 0.3s ease !important;
        display: flex !important;
        align-items: start !important;
        gap: 12px !important;
        position: relative !important;
        list-style: none !important;
      `;
      
      // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
      const colors = {
        'success': { border: '#10b981', bg: '#f0fdf4', icon: 'âœ…' },
        'error': { border: '#ef4444', bg: '#fef2f2', icon: 'âŒ' },
        'warning': { border: '#f59e0b', bg: '#fffbeb', icon: 'âš ï¸' },
        'info': { border: '#3b82f6', bg: '#eff6ff', icon: 'â„¹ï¸' }
      };
      
      const style = colors[type] || colors.info;
      toast.style.borderRight = `4px solid ${style.border} !important`;
      toast.style.background = `${style.bg} !important`;
      
      // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
      toast.innerHTML = `
        <span style="font-size: 20px; display: block; flex-shrink: 0;">${style.icon}</span>
        <div style="flex: 1; min-width: 0;">
          <div style="font-weight: 600; font-size: 14px; margin-bottom: 4px; font-family: 'Cairo', sans-serif; color: #1f2937;">
            ${title}
          </div>
          ${description ? `<div style="font-size: 13px; color: #6b7280; font-family: 'Cairo', sans-serif; word-wrap: break-word;">
            ${description}
          </div>` : ''}
        </div>
        <button style="
          position: absolute;
          top: 8px;
          left: 8px;
          width: 20px;
          height: 20px;
          border: 1px solid #e5e7eb;
          border-radius: 50%;
          background: white;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          opacity: 0.5;
          transition: opacity 0.2s;
          font-size: 16px;
          line-height: 1;
          padding: 0;
        " onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.5'">Ã—</button>
      `;
      
      toaster.appendChild(toast);
      
      // Ø­Ø°Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø¹Ø¯ 4 Ø«ÙˆØ§Ù†Ù
      const removeToast = () => {
        toast.style.animation = 'slideOutLeft 0.3s ease';
        setTimeout(() => {
          toast.remove();
          if (toaster.children.length === 0) {
            toaster.remove();
          }
        }, 300);
      };
      
      const autoRemoveTimer = setTimeout(removeToast, 4000);
      
      // Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
      toast.querySelector('button').onclick = () => {
        clearTimeout(autoRemoveTimer);
        removeToast();
      };
      
      return toast;
    };

    // Ø¯Ø§Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    window.testNotification = function() {
      showNotification('Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±', 'Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­! âœ…', 'success');
    };

    // ========================================
    // Ù†Ø¸Ø§Ù… CRUD Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
    // ========================================
    
    // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© (Read)
    window.getAllTasks = function() {
      try {
        const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        const charityTasks = JSON.parse(localStorage.getItem('charity_tasks') || '[]');
        console.log('ğŸ“‹ Tasks:', tasks.length, '| Charity Tasks:', charityTasks.length);
        return { tasks, charityTasks };
      } catch (error) {
        console.error('Error reading tasks:', error);
        return { tasks: [], charityTasks: [] };
      }
    };
    
    window.getTaskById = function(taskId) {
      const { tasks, charityTasks } = getAllTasks();
      return tasks.find(t => t.id === taskId) || charityTasks.find(t => t.id === taskId) || null;
    };
    
    // Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« (Update)
    window.updateTask = function(taskId, updates) {
      try {
        console.log('Updating task:', taskId, updates);
        let updated = false;
        
        // ØªØ­Ø¯ÙŠØ« ÙÙŠ tasks
        const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        const taskIndex = tasks.findIndex(t => t.id === taskId);
        if (taskIndex !== -1) {
          tasks[taskIndex] = { ...tasks[taskIndex], ...updates, updatedAt: new Date().toISOString() };
          localStorage.setItem('tasks', JSON.stringify(tasks));
          console.log('âœ“ Updated in tasks');
          updated = true;
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙÙŠ charity_tasks
        const charityTasks = JSON.parse(localStorage.getItem('charity_tasks') || '[]');
        const charityIndex = charityTasks.findIndex(t => t.id === taskId);
        if (charityIndex !== -1) {
          charityTasks[charityIndex] = { ...charityTasks[charityIndex], ...updates, updatedAt: new Date().toISOString() };
          localStorage.setItem('charity_tasks', JSON.stringify(charityTasks));
          console.log('âœ“ Updated in charity_tasks');
          updated = true;
        }
        
        // ØªØ­Ø¯ÙŠØ« ÙÙŠ bt Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        if (window.bt && typeof window.bt.updateTask === 'function') {
          try {
            window.bt.updateTask(taskId, updates);
            console.log('âœ“ Updated via bt.updateTask');
            updated = true;
          } catch (e) {
            console.warn('bt.updateTask failed:', e);
          }
        }
        
        if (updated) {
          showNotification('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ“', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
          setTimeout(() => location.reload(), 800);
          return true;
        } else {
          showNotification('Ø®Ø·Ø£', 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ù…Ø©', 'error');
          return false;
        }
      } catch (error) {
        console.error('Error updating task:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù‡Ù…Ø©: ' + error.message, 'error');
        return false;
      }
    };
    
    // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø­Ø°Ù (Delete)
    window.deleteTask = function(taskId) {
      if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) {
        return false;
      }
      
      try {
        console.log('Deleting task:', taskId);
        let deleted = false;
        
        // Ø­Ø°Ù Ù…Ù† tasks
        const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
        const newTasks = tasks.filter(t => t.id !== taskId);
        if (newTasks.length < tasks.length) {
          localStorage.setItem('tasks', JSON.stringify(newTasks));
          console.log('âœ“ Deleted from tasks');
          deleted = true;
        }
        
        // Ø­Ø°Ù Ù…Ù† charity_tasks
        const charityTasks = JSON.parse(localStorage.getItem('charity_tasks') || '[]');
        const newCharityTasks = charityTasks.filter(t => t.id !== taskId);
        if (newCharityTasks.length < charityTasks.length) {
          localStorage.setItem('charity_tasks', JSON.stringify(newCharityTasks));
          console.log('âœ“ Deleted from charity_tasks');
          deleted = true;
        }
        
        // Ø­Ø°Ù Ù…Ù† bt Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
        if (window.bt && typeof window.bt.deleteTask === 'function') {
          try {
            window.bt.deleteTask(taskId);
            console.log('âœ“ Deleted via bt.deleteTask');
            deleted = true;
          } catch (e) {
            console.warn('bt.deleteTask failed:', e);
          }
        }
        
        if (deleted) {
          showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù âœ“', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
          setTimeout(() => location.reload(), 800);
          return true;
        } else {
          showNotification('Ø®Ø·Ø£', 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ù…Ø©', 'error');
          return false;
        }
      } catch (error) {
        console.error('Error deleting task:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©: ' + error.message, 'error');
        return false;
      }
    };
    
    // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹
    window.getAllProjects = function() {
      try {
        const projects = JSON.parse(localStorage.getItem('projects') || '[]');
        console.log('ğŸ“ Projects:', projects.length);
        return projects;
      } catch (error) {
        console.error('Error reading projects:', error);
        return [];
      }
    };
    
    window.createProject = function(projectData) {
      try {
        const projects = getAllProjects();
        const newProject = {
          id: 'project_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
          ...projectData,
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        };
        projects.unshift(newProject);
        localStorage.setItem('projects', JSON.stringify(projects));
        console.log('âœ“ Project created:', newProject.id);
        showNotification('ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ âœ“', `Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ "${newProject.name}" ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨Ù†Ø¬Ø§Ø­`, 'success');
        return newProject;
      } catch (error) {
        console.error('Error creating project:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ' + error.message, 'error');
        return null;
      }
    };
    
    window.updateProject = function(projectId, updates) {
      try {
        const projects = getAllProjects();
        const index = projects.findIndex(p => p.id === projectId);
        if (index !== -1) {
          projects[index] = { ...projects[index], ...updates, updatedAt: new Date().toISOString() };
          localStorage.setItem('projects', JSON.stringify(projects));
          showNotification('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ“', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­', 'success');
          return true;
        }
        return false;
      } catch (error) {
        console.error('Error updating project:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ' + error.message, 'error');
        return false;
      }
    };
    
    window.deleteProject = function(projectId) {
      if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.')) {
        return false;
      }
      
      try {
        const projects = getAllProjects();
        const newProjects = projects.filter(p => p.id !== projectId);
        localStorage.setItem('projects', JSON.stringify(newProjects));
        
        // Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©
        const { tasks, charityTasks } = getAllTasks();
        const newTasks = tasks.filter(t => t.projectId !== projectId);
        const newCharityTasks = charityTasks.filter(t => t.projectId !== projectId);
        localStorage.setItem('tasks', JSON.stringify(newTasks));
        localStorage.setItem('charity_tasks', JSON.stringify(newCharityTasks));
        
        showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù âœ“', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡', 'success');
        setTimeout(() => location.reload(), 800);
        return true;
      } catch (error) {
        console.error('Error deleting project:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹: ' + error.message, 'error');
        return false;
      }
    };
    
    // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØªØ¨Ø±Ø¹ÙŠÙ†
    window.getAllDonors = function() {
      try {
        const donors = JSON.parse(localStorage.getItem('donors') || '[]');
        console.log('ğŸ‘¥ Donors:', donors.length);
        return donors;
      } catch (error) {
        console.error('Error reading donors:', error);
        return [];
      }
    };
    
    window.createDonor = function(donorData) {
      try {
        const donors = getAllDonors();
        const newDonor = {
          id: 'donor_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
          ...donorData,
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        };
        donors.unshift(newDonor);
        localStorage.setItem('donors', JSON.stringify(donors));
        console.log('âœ“ Donor created:', newDonor.id);
        showNotification('ØªÙ… Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ“', `Ø§Ù„Ù…ØªØ¨Ø±Ø¹ "${newDonor.name}" ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­`, 'success');
        return newDonor;
      } catch (error) {
        console.error('Error creating donor:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØªØ¨Ø±Ø¹: ' + error.message, 'error');
        return null;
      }
    };
    
    window.updateDonor = function(donorId, updates) {
      try {
        const donors = getAllDonors();
        const index = donors.findIndex(d => d.id === donorId);
        if (index !== -1) {
          donors[index] = { ...donors[index], ...updates, updatedAt: new Date().toISOString() };
          localStorage.setItem('donors', JSON.stringify(donors));
          showNotification('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ“', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¨Ø±Ø¹ Ø¨Ù†Ø¬Ø§Ø­', 'success');
          return true;
        }
        return false;
      } catch (error) {
        console.error('Error updating donor:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØªØ¨Ø±Ø¹: ' + error.message, 'error');
        return false;
      }
    };
    
    window.deleteDonor = function(donorId) {
      if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØ¨Ø±Ø¹ØŸ')) {
        return false;
      }
      
      try {
        const donors = getAllDonors();
        const newDonors = donors.filter(d => d.id !== donorId);
        localStorage.setItem('donors', JSON.stringify(newDonors));
        showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù âœ“', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØªØ¨Ø±Ø¹ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        setTimeout(() => location.reload(), 800);
        return true;
      } catch (error) {
        console.error('Error deleting donor:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…ØªØ¨Ø±Ø¹: ' + error.message, 'error');
        return false;
      }
    };
    
    // Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø´Ø§Ù‡ÙŠØ±
    window.getAllInfluencers = function() {
      try {
        const influencers = JSON.parse(localStorage.getItem('influencers') || '[]');
        console.log('â­ Influencers:', influencers.length);
        return influencers;
      } catch (error) {
        console.error('Error reading influencers:', error);
        return [];
      }
    };
    
    window.createInfluencer = function(influencerData) {
      try {
        const influencers = getAllInfluencers();
        const newInfluencer = {
          id: 'influencer_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
          ...influencerData,
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        };
        influencers.unshift(newInfluencer);
        localStorage.setItem('influencers', JSON.stringify(influencers));
        console.log('âœ“ Influencer created:', newInfluencer.id);
        showNotification('ØªÙ… Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ“', `Ø§Ù„Ù…Ø´Ù‡ÙˆØ± "${newInfluencer.name}" ØªÙ…Øª Ø¥Ø¶Ø§ÙØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­`, 'success');
        return newInfluencer;
      } catch (error) {
        console.error('Error creating influencer:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø´Ù‡ÙˆØ±: ' + error.message, 'error');
        return null;
      }
    };
    
    window.updateInfluencer = function(influencerId, updates) {
      try {
        const influencers = getAllInfluencers();
        const index = influencers.findIndex(i => i.id === influencerId);
        if (index !== -1) {
          influencers[index] = { ...influencers[index], ...updates, updatedAt: new Date().toISOString() };
          localStorage.setItem('influencers', JSON.stringify(influencers));
          showNotification('ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ“', 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ù‡ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­', 'success');
          return true;
        }
        return false;
      } catch (error) {
        console.error('Error updating influencer:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø´Ù‡ÙˆØ±: ' + error.message, 'error');
        return false;
      }
    };
    
    window.deleteInfluencer = function(influencerId) {
      if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ù‡ÙˆØ±ØŸ')) {
        return false;
      }
      
      try {
        const influencers = getAllInfluencers();
        const newInfluencers = influencers.filter(i => i.id !== influencerId);
        localStorage.setItem('influencers', JSON.stringify(newInfluencers));
        showNotification('ØªÙ… Ø§Ù„Ø­Ø°Ù âœ“', 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø´Ù‡ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­', 'success');
        setTimeout(() => location.reload(), 800);
        return true;
      } catch (error) {
        console.error('Error deleting influencer:', error);
        showNotification('Ø®Ø·Ø£', 'ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ù…Ø´Ù‡ÙˆØ±: ' + error.message, 'error');
        return false;
      }
    };
    
    // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Console
    window.showAllData = function() {
      console.log('='.repeat(60));
      console.log('ğŸ“Š Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…:');
      console.log('='.repeat(60));
      
      const { tasks, charityTasks } = getAllTasks();
      console.log('ğŸ“‹ Ø§Ù„Ù…Ù‡Ø§Ù… (tasks):', tasks.length);
      console.table(tasks);
      
      console.log('ğŸ“‹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø®ÙŠØ±ÙŠØ© (charity_tasks):', charityTasks.length);
      console.table(charityTasks);
      
      const projects = getAllProjects();
      console.log('ğŸ“ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ (projects):', projects.length);
      console.table(projects);
      
      const donors = getAllDonors();
      console.log('ğŸ‘¥ Ø§Ù„Ù…ØªØ¨Ø±Ø¹ÙˆÙ† (donors):', donors.length);
      console.table(donors);
      
      const influencers = getAllInfluencers();
      console.log('â­ Ø§Ù„Ù…Ø´Ø§Ù‡ÙŠØ± (influencers):', influencers.length);
      console.table(influencers);
      
      console.log('='.repeat(60));
      console.log('âœ… Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ØŒ Ø§ÙƒØªØ¨: showAllData()');
      console.log('='.repeat(60));
    };
    
    console.log('âœ… Ù†Ø¸Ø§Ù… CRUD Ø¬Ø§Ù‡Ø²!');
    console.log('ğŸ“ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø©:');
    console.log('  - getAllTasks() / getTaskById(id) / updateTask(id, data) / deleteTask(id)');
    console.log('  - getAllProjects() / createProject(data) / updateProject(id, data) / deleteProject(id)');
    console.log('  - getAllDonors() / createDonor(data) / updateDonor(id, data) / deleteDonor(id)');
    console.log('  - getAllInfluencers() / createInfluencer(data) / updateInfluencer(id, data) / deleteInfluencer(id)');
    console.log('  - showAllData() - Ù„Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');

    // Ø±Ø¨Ø· Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù…
    window.addEventListener('load', function() {
      setTimeout(function() {
        // Override original task creation to show notifications
        if (window.bt && window.bt.createTask) {
          const originalCreateTask = window.bt.createTask;
          window.bt.createTask = function(taskData) {
            try {
              originalCreateTask.call(this, taskData);
              showNotification('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©', `Ø§Ù„Ù…Ù‡Ù…Ø© "${taskData.title}" ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ø¨Ù†Ø¬Ø§Ø­`, 'success');
            } catch (error) {
              showNotification('âŒ Ø®Ø·Ø£', 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ù‡Ù…Ø©: ' + error.message, 'error');
              throw error;
            }
          };
        }
        
        console.log('âœ… Notification system ready. Type testNotification() to test.');
      }, 2000);
    });
  </script>
</head>

<body>
  <div id="root"></div>
</body>

</html>